web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
abi = JSON.parse('[ { "constant": true, "inputs": [ { "name": "uemail", "type": "bytes32" } ], "name": "getRequestOrgs", "outputs": [ { "name": "", "type": "string" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "getCustomersCount", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [ { "name": "uname", "type": "bytes32" }, { "name": "password", "type": "bytes32" }, { "name": "eth", "type": "address" } ], "name": "addOrganization", "outputs": [ { "name": "", "type": "uint256" } ], "payable": true, "stateMutability": "payable", "type": "function" }, { "constant": true, "inputs": [], "name": "getOrganizationCount", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "index", "type": "uint256" } ], "name": "getOrganizationName", "outputs": [ { "name": "", "type": "bytes32" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "oname", "type": "bytes32" }, { "name": "index", "type": "uint256" } ], "name": "getCustomerData", "outputs": [ { "name": "", "type": "bytes32" }, { "name": "", "type": "bytes32" }, { "name": "", "type": "bytes32" }, { "name": "", "type": "bytes32" }, { "name": "", "type": "bytes32" }, { "name": "", "type": "bytes32" }, { "name": "", "type": "bool" }, { "name": "", "type": "address" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [], "name": "checkDeployed", "outputs": [ { "name": "", "type": "bool" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": true, "inputs": [ { "name": "index", "type": "uint256" } ], "name": "getOrganizationData", "outputs": [ { "name": "", "type": "bytes32" }, { "name": "", "type": "address" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [ { "name": "uemail", "type": "bytes32" }, { "name": "orgAddress", "type": "address" } ], "name": "ifAllowed", "outputs": [ { "name": "", "type": "bool" } ], "payable": true, "stateMutability": "payable", "type": "function" }, { "constant": false, "inputs": [ { "name": "x", "type": "bytes32" } ], "name": "bytes32ToString", "outputs": [ { "name": "", "type": "string" } ], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": true, "inputs": [ { "name": "index", "type": "uint256" } ], "name": "getDataHash", "outputs": [ { "name": "", "type": "bytes32" } ], "payable": false, "stateMutability": "view", "type": "function" }, { "constant": false, "inputs": [ { "name": "uemail", "type": "bytes32" }, { "name": "oname", "type": "bytes32" }, { "name": "orgAddress", "type": "address" } ], "name": "sendRequest", "outputs": [], "payable": true, "stateMutability": "payable", "type": "function" }, { "constant": false, "inputs": [ { "name": "oname", "type": "bytes32" }, { "name": "index", "type": "uint256" } ], "name": "isAvailable", "outputs": [ { "name": "", "type": "bool" } ], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [ { "name": "index", "type": "uint256" } ], "name": "approveRequest", "outputs": [], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "constant": false, "inputs": [ { "name": "uname", "type": "bytes32" }, { "name": "gender", "type": "bytes32" }, { "name": "dob", "type": "bytes32" }, { "name": "maritalStatus", "type": "bytes32" }, { "name": "aadharNumber", "type": "bytes32" }, { "name": "driversLicense", "type": "bytes32" }, { "name": "pan", "type": "bytes32" }, { "name": "email", "type": "bytes32" }, { "name": "phone", "type": "bytes32" }, { "name": "isVerified", "type": "bool" }, { "name": "oAddress", "type": "address" } ], "name": "addCustomer", "outputs": [ { "name": "", "type": "uint256" } ], "payable": false, "stateMutability": "nonpayable", "type": "function" }, { "inputs": [], "payable": false, "stateMutability": "nonpayable", "type": "constructor" } ]');
KycContract = web3.eth.contract(abi);
// In your nodejs console, execute contractInstance.address to get the address at which the contract is deployed and change the line below to use your deployed address
contractInstance = KycContract.at('0x9f22e5c6c45dba35f8ff80af3e5c359d557e014c');

$(document).ready(function() {
  customersCount = contractInstance.getCustomersCount();
  console.log(customersCount);
  for(var i=0;i<customersCount;i++) {
  	var date = new Date();
  	var customerData = contractInstance.getCustomerData("0x00",i);
  	console.log(i);
  	console.log(customerData[0]);
  	let dataHash = contractInstance.getDataHash(i);
  	let val = web3.toAscii(customerData[0]);
  	$("#box").append('<i class="anticon anticon-down" style="display: block; font-size: 24pt; margin-bottom: 27px;"></i><div class="ant-card genesis block block-shadow ant-card-bordered"> <div class="ant-card-body"> <div> <span class="ant-input-group-wrapper" style="margin-bottom: 20px;"> <span class="ant-input-wrapper ant-input-group"> <span class="ant-input-group-addon"> <span style="margin-right: 7px; margin-left: 7px;">NAME</span> </span> <span class="genesis-data genesis-mutate genesis-mutate-2 ant-input-affix-wrapper"> <span class="ant-input-prefix"><i class="anticon anticon-file-text"></i></span> <span class="ant-input">'+val+' </span> </span> </span> <div class="genesis-previous-hash" style="margin-bottom: 7px; display: flex; justify-content: flex-start; flex-wrap: nowrap; max-width: 100%; overflow: auto;"> <div style="white-space: nowrap;">PREVIOUS HASH</div> <div data-show="true" class="ant-tag ant-tag-green" style="font-size: 8pt; float: right; font-family: &quot;Courier New&quot;; cursor: default; display: block; background: none; border-color: transparent;"> <span class="ant-tag-text">0</span> </div> </div> <div class="genesis-hash genesis-hash-2 genesis-hash-3" style="display: flex; justify-content: flex-start; flex-wrap: nowrap; max-width: 100%; overflow: auto;"> <div style="margin-right: 15px;">HASH</div> <div data-show="true" class="ant-tag ant-tag-green" style="display: block; font-size: 9pt; font-family: &quot;Courier New&quot;; cursor: default; max-width: 100%; overflow: auto;"> <span class="ant-tag-text">'+dataHash+'</span> </div> </div> <div style="margin-top: 27px; display: flex; justify-content: space-between; align-items: center; flex-wrap: nowrap; text-overflow: ellipsis;"> <div style="font-size: 24px; white-space: nowrap; overflow: auto;"> <span class="genesis-index" style="letter-spacing: 1px;">BLOCK #' + i + '</span> <span class="genesis-timestamp"> <span style="font-weight: 300; font-size: 8pt;">on '+ date + '</span> </span> </div><div data-show="true" class="ant-tag genesis-mine genesis-nonce" style="cursor: default;"> <span class="ant-tag-text" href="#collapsedDiv' + i + '" data-toggle="collapse">More</span> </div> </div><div id="collapsedDiv' + i + '" class="collapse"> <div> <span class="ant-input-group-wrapper" style="margin-bottom: 20px;"> <span class="ant-input-wrapper ant-input-group"> <span class="ant-input-group-addon"> <span style="margin-right: 7px; margin-left: 7px;">Gender</span> </span> <span class="genesis-data genesis-mutate genesis-mutate-2 ant-input-affix-wrapper"> <span class="ant-input-prefix"><i class="anticon anticon-file-text"></i></span> <input type="text" class="ant-input"> </span> </span> </span> </div> <div> <span class="ant-input-group-wrapper" style="margin-bottom: 20px;"> <span class="ant-input-wrapper ant-input-group"> <span class="ant-input-group-addon"> <span style="margin-right: 7px; margin-left: 7px;">Date Of Birth </span> </span> <span class="genesis-data genesis-mutate genesis-mutate-2 ant-input-affix-wrapper"> <span class="ant-input-prefix"><i class="anticon anticon-file-text"></i></span> <input type="text" class="ant-input"> </span> </span> </span> </div> <div> <span class="ant-input-group-wrapper" style="margin-bottom: 20px;"> <span class="ant-input-wrapper ant-input-group"> <span class="ant-input-group-addon"> <span style="margin-right: 7px; margin-left: 7px;">Marital Status </span> </span> <span class="genesis-data genesis-mutate genesis-mutate-2 ant-input-affix-wrapper"> <span class="ant-input-prefix"><i class="anticon anticon-file-text"></i></span> <input type="text" class="ant-input"> </span> </span> </span> </div> <div> <span class="ant-input-group-wrapper" style="margin-bottom: 20px;"> <span class="ant-input-wrapper ant-input-group"> <span class="ant-input-group-addon"> <span style="margin-right: 7px; margin-left: 7px;">Aadhar Number </span> </span> <span class="genesis-data genesis-mutate genesis-mutate-2 ant-input-affix-wrapper"> <span class="ant-input-prefix"><i class="anticon anticon-file-text"></i></span> <input type="text" class="ant-input"> </span> </span> </span> </div> <div> <span class="ant-input-group-wrapper" style="margin-bottom: 20px;"> <span class="ant-input-wrapper ant-input-group"> <span class="ant-input-group-addon"> <span style="margin-right: 7px; margin-left: 7px;">Driving Licence Number </span> </span> <span class="genesis-data genesis-mutate genesis-mutate-2 ant-input-affix-wrapper"> <span class="ant-input-prefix"><i class="anticon anticon-file-text"></i></span> <input type="text" class="ant-input"> </span> </span> </span> </div> <div> <span class="ant-input-group-wrapper" style="margin-bottom: 20px;"> <span class="ant-input-wrapper ant-input-group"> <span class="ant-input-group-addon"> <span style="margin-right: 7px; margin-left: 7px;">PAN</span> </span> <span class="genesis-data genesis-mutate genesis-mutate-2 ant-input-affix-wrapper"> <span class="ant-input-prefix"><i class="anticon anticon-file-text"></i></span> <input type="text" class="ant-input"> </span> </span> </span> </div> <div> <span class="ant-input-group-wrapper" style="margin-bottom: 20px;"> <span class="ant-input-wrapper ant-input-group"> <span class="ant-input-group-addon"> <span style="margin-right: 7px; margin-left: 7px;">E-mail ID</span> </span> <span class="genesis-data genesis-mutate genesis-mutate-2 ant-input-affix-wrapper"> <span class="ant-input-prefix"><i class="anticon anticon-file-text"></i></span> <input type="text" class="ant-input"> </span> </span> </span> </div> <div> <span class="ant-input-group-wrapper" style="margin-bottom: 20px;"> <span class="ant-input-wrapper ant-input-group"> <span class="ant-input-group-addon"> <span style="margin-right: 7px; margin-left: 7px;">Mobile Number</span> </span> <span class="genesis-data genesis-mutate genesis-mutate-2 ant-input-affix-wrapper"> <span class="ant-input-prefix"><i class="anticon anticon-file-text"></i></span> <input type="text" class="ant-input">  </span> </span> </span> </div> <div style="margin-left:45%"> <button type="button" class="press ant-btn mine-button animate"> <i class="anticon anticon-plus"></i> <span style="margin-left: 7.5px; color: white;">Verify</span> </button> </div> </div> </div> </div> </div> </div> </div> </div> ');  }	  
});
